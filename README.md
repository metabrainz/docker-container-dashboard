# docker-container-dashboard

A [DataTables](https://datatables.net/) based dashboard providing a means to visualise
the Docker containers running across the MetaBrainz infrastructure.

## DataTables

Datatables loads the Docker container information from a JSON file
via [AJAX](https://datatables.net/manual/ajax):

```javascript
$("#containers").DataTable({
  ajax: "docker-datatables.json"
});
```

The JSON file will be periodically generated by a separate script.

### Data format

Table data is loaded from the "data" key of the JSON object, which contains an array
of rows:

```json
{
  "data": [
    [
      "example",
      "musicbrainz-website-prod",
      1650261733000,
      "metabrainz/musicbrainz-website:production"
    ]
  ]
}
```

The values contained in each row is as follows:

1. Container host
2. Container name
3. Container start time in JS epoch (milliseconds since 1971/01/01)
4. Container image

The JSON will also include an "errors" key, containing an array of hostnames where the
script failed to retrieve Docker container information.

### Extensions

The page currently loads the following Datatables extensions:

* [SearchPanes](https://datatables.net/extensions/searchpanes/)
* [StateRestore](https://datatables.net/extensions/staterestore/)

## Planned changes

- [ ] Load CSS/JS assets locally instead of from a CDN
- [ ] Convert page to BootStrap 5
- [ ] Remove the sub-header containing the "last updated" text
- [ ] Add a "reload" button that triggers
  a [DataTables AJAX reload](https://datatables.net/reference/api/ajax.reload())
- [ ] Add support for the "errors" key in the JSON data that adds an alert to
  the top of the page
